># Q: How should I deal with this?

```py
# 2.2.8 | Type Summary Visualization (optional)
print("\n2.2.8 üìä Type summary visualization")

# Reload registry (so 2.2.8 can run standalone after 2.2.7)
fg_registry_path = SEC2_REPORTS_DIR / "feature_group_registry.csv"
if not fg_registry_path.exists():
    raise FileNotFoundError(
        f"‚ùå feature_group_registry.csv not found at {fg_registry_path}. "
        "Run 2.2.7 first."
    )

feature_group_df = pd.read_csv(fg_registry_path)

try:
    import matplotlib.pyplot as plt
except ImportError as e:
    raise ImportError("matplotlib is required for 2.2.8 plots.") from e

# Determine output figures directory
if "FIGURES_DIR" in globals():
    fig_dir_228 = FIGURES_DIR / "section2"
else:
    fig_dir_228 = SEC2_REPORTS_DIR / "figures"

fig_dir_228.mkdir(parents=True, exist_ok=True)


# Simple bar chart: counts by feature_group
fg_counts = (
    feature_group_df["feature_group"]
    .fillna("unknown")
    .value_counts()
    .sort_values(ascending=False)
)

# display counts
print("\nüìä 2.2.8 feature group counts:")
if not fg_counts.empty:
    display(fg_counts.rename("n_columns").to_frame())
else:
    print("   (no feature groups to plot)")

fig, ax = plt.subplots(figsize=(8, 4))
ax.bar(fg_counts.index, fg_counts.values)
ax.set_title("Feature Group Distribution (Section 2.2)")
ax.set_xlabel("Feature group")
ax.set_ylabel("Number of columns")
ax.set_xticks(range(len(fg_counts)))
ax.set_xticklabels(fg_counts.index, rotation=45, ha="right")
plt.tight_layout()

type_dist_path = fig_dir_228 / "type_distribution_by_feature_group.png"
fig.savefig(type_dist_path, dpi=150)
plt.close(fig)

print(f"üíæ Wrote type distribution plot ‚Üí {type_dist_path}")

n_feature_groups_228 = int(feature_group_df["feature_group"].nunique())

summary_228 = {
    "section":            "2.2.8",
    "section_name":       "Type summary visualization",
    "check":              "Plot distribution of column types and feature groups",
    "level":              "info",
    "status":             "INFO",  # visualization-only
    "n_feature_groups":   n_feature_groups_228,
    "detail":             f"type_distribution_by_feature_group.png under {fig_dir_228}",
    "timestamp":          pd.Timestamp.now(timezone.utc),
}

# ‚úÖ Use shared helper and track usage for metrics
append_sec2(summary_228, SECTION2_REPORT_PATH)
SECTION2_APPEND_SECTIONS.add("2.2.8")  # this section now counted in refactor stats

print("‚úÖ 2.2.8 complete.")

# OUTPUT:
2.2.8 üìä Type summary visualization

üìä 2.2.8 feature group counts:
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>n_columns</th>
    </tr>
    <tr>
      <th>feature_group</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>categorical_nominal</th>
      <td>16</td>
    </tr>
    <tr>
      <th>numeric_continuous</th>
      <td>8</td>
    </tr>
    <tr>
      <th>binary</th>
      <td>3</td>
    </tr>
    <tr>
      <th>datetime</th>
      <td>2</td>
    </tr>
    <tr>
      <th>numeric_discrete</th>
      <td>1</td>
    </tr>
    <tr>
      <th>id</th>
      <td>1</td>
    </tr>
    <tr>
      <th>target</th>
      <td>1</td>
    </tr>
    <tr>
      <th>target_aux</th>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div>

üíæ Wrote type distribution plot ‚Üí /Users/b/DATA/PROJECTS/Telco/Level_3/resources/figures/section2/type_distribution_by_feature_group.png
‚ö†Ô∏è Could not append diagnostics: 'dict' object has no attribute 'columns'
‚úÖ 2.2.8 complete.
```

># SOLUTION:
Nice catch ‚Äî this one‚Äôs simple.

The problem is this line:

```python
append_sec2(summary_228, SECTION2_REPORT_PATH)
```

Your helper `append_sec2` expects a **DataFrame**, but you‚Äôre giving it a **dict**, so inside it tries to access `.columns` and blows up:

> `'dict' object has no attribute 'columns'`

### Fix

Just wrap the dict in a one-row DataFrame before passing it in:

```python
append_sec2(pd.DataFrame([summary_228]), SECTION2_REPORT_PATH)
SECTION2_APPEND_SECTIONS.add("2.2.8")
```

So the bottom of the cell should be:

```python
n_feature_groups_228 = int(feature_group_df["feature_group"].nunique())

summary_228 = {
    "section":            "2.2.8",
    "section_name":       "Type summary visualization",
    "check":              "Plot distribution of column types and feature groups",
    "level":              "info",
    "status":             "INFO",  # visualization-only
    "n_feature_groups":   n_feature_groups_228,
    "detail":             f"type_distribution_by_feature_group.png under {fig_dir_228}",
    "timestamp":          pd.Timestamp.now(timezone.utc),
}

append_sec2(pd.DataFrame([summary_228]), SECTION2_REPORT_PATH)
SECTION2_APPEND_SECTIONS.add("2.2.8")

print("‚úÖ 2.2.8 complete.")
```

After that, re-run the cell and the diagnostics row for 2.2.8 should append cleanly with no warning.
